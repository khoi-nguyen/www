#!/usr/bin/env python

import re
import json
import sys

def extract_meta(path: str) -> str:
    with open(path, 'r', encoding="utf-8") as file:
        content = file.read()
        match = re.search(r'const\s+meta:\sMetadata\s*=\s*({[^}]*})', content, re.DOTALL)
        if match:
            meta = match.group(1)
            meta = re.sub(r'(\n\s*)(\w+):', r'\1"\2":', meta, re.DOTALL)
            meta = meta.replace('true', 'True').replace('false', 'False')
            return json.dumps(eval(meta), ensure_ascii=False, indent=2)
        raise ValueError("Missing Metadata")

print(extract_meta(sys.argv[1]))
